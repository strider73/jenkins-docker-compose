version: '3.8'
services:
  jenkins-master:
    #image: jenkins-master
    build:
        context: ./jenkins-master
        dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-master
    ports:
      - "50000:50000"
      - "8443:8443"
    volumes:
      - jenkins_https_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - jenkins-network
  jenkins-agent:
    # image: striderlee/jenkins-agent
    build:
       context: ./jenkins-agent
       dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-agent
    expose:
      - 22
    ports:
      - "2222:22"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - JENKINS_URL=https://strider.freeddns.org:8443
      - JENKINS_AGENT_NAME=ssh-agent
      # just remember PRIVATE KEY will need extra carrage-return at the end of context once it uploaded to git hub .. Dont know why 
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCQ2jJz9hteqixbMdvxVnHLc6lsdLkAGAzZ4rIzW1+g9S/nGVrAnxnhTHJK+chgta1AviUop5n/YIactF3zLJI2uC84RV3GSMs1JLN2Bi1GEWpJ6ctYnVWgCJvlAIKBqeB66OyGmobfWU7CBbc1GsBAC21jAePYjSgUkR9CbcjK/RcWHjrK5SSbiChzYcH9t0i6cJccwE3SMzj5oRtJTetwC8Qfs2TlEOUHqI9rMI1NGUHGD8oJ9aDY+JTmGFpVAM0uiiWn3ohj7k4EzeTUgDtJlvgEVoe99GfITTXxkqeJrqsw70KBiJoPLrUqA2zysWNM8UiYiy74Omo7UXyQB1ULJkzYgQhbzT8cZmHkNMiPwXjxdfQqLlYsJxsrw09vwo8YsPQDDYHHZhoTmxn+x0OQuoZVxWr8WjkA2HeChV1cEWpObpEhHqs03WdfORXFN6eizwwyvWZYDwUa3mm9jv50zGedZN9PBKctrY6YPqmHcY6DOiOq6NvPocrWSt3jY20= strider@strider-pi
                                 


volumes:
  jenkins_https_home:

networks:
  jenkins-network:



