services:
  jenkins-master:
    #image: jenkins-master
    build:
        context: ./jenkins-master
        dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-master 
    ports:
      - "50000:50000"
      - "8443:8443"
    volumes:
      - jenkins_https_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - jenkins-network
  jenkins-agent:
    # image: striderlee/jenkins-agent
    build:
       context: ./jenkins-agent
       dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-agent
    expose:
      - 22
    ports:
      - "2222:22"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - jenkins_agent_home:/home/jenkins
    environment:
      - JENKINS_URL=http://localhost:8443
      - JENKINS_AGENT_NAME=ssh-agent
      # just remember PRIVATE KEY will need extra carrage-return at the end of context once it uploaded to git hub .. Dont know why 
      # So added carrage-return and did ulpoad to git again and seems like working now but need to check in every fresh installation process
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDQb6D0D31Tlv8kVg0VdRphOMo4S6nZjCCib3xBWx0cQCvmtA/JrFGXcvdBDP5ii1DubAYsR+PuEYOzECzIbli6jZaIAV60/KxYbVD/Zr5ZpcC9V2j10ScbsIKhWB0+moMw55CMzmiEwQykLRIU5Lb1zjkVjHc6e3EF5NagbS5xnEixPKtqZ14ow7PWti3JYPGfXmaw4eksvKlEPdqqDpgSiOetEeQnt/4BOmkv5cITOWwTwLfsMUsf/O0sg614MFN1cHQfrbyTCHtPVjTsxjol29x9SVosr1Jd9RqfZEq8dMeYz7lVzWzhstrHMkkEZA6SpxK79Nqe0HfsLpyoLG11zDT9jJNNojQ6g8oMzn70QBMIfYUf5GCDaC46we/rKHBj8G0fD1vtfYC7Agn0D52RzbzaVzedoErq2kdbhqYuNYsX+cdGRx3dKASg99vjv1R6Ulbx9cH6ROv0ves2h2UyR1RLaMks8Fh+oCRBLa38c8+G07AOgLNx9LxhYdkIMsE= jenkins@c2b67b7954af

                                 


volumes:
  jenkins_https_home:
  jenkins_agent_home:

networks:
  jenkins-network:



