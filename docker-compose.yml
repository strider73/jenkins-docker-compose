version: '3.8'
services:
  jenkins-master:
    #image: jenkins-master
    build:
        context: ./jenkins-master
        dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-master
    ports:
      - "8080:8080"
      - "50000:50000"
      - "8443:8443"
    volumes:
      - jenkins_https_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - jenkins-network
  jenkins-agent:
    image: striderlee/jenkins-agent
    # build:
    #    context: ./jenkins-agent
    #    dockerfile: Dockerfile
    privileged: true
    user: root
    container_name: jenkins-agent
    expose:
      - 22
    ports:
      - "2222:22"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - JENKINS_URL=https://strider.freeddns.org:8443
      - JENKINS_AGENT_NAME=ssh-agent
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDhV7SQHH87J6q+CpaZMPoGn/lJArKhD6q0WQx5fhL3CJmEdP2uKEFQVHXBCBCimgOsk2BZ0xKnXWYUxEkffsBu0GJndybAmA/J5k+oZcvGrTL5kH2LWow1P4nLcJQr1SAjOvr1k8JH2dCJUPWZcw3gg4yFYNw0ngL3ipnb1NNh3KsC3jRfcNbd1rZTxCi+0nhNb6lsSpB6HFlk8r75PcByMEbWIrTO762tTgFZaGZrJwuRdi29FjrXVvM94Z+vcBH4f37qWgKCJvez2UkyurIEo7ofliIagYy/eikNX7uEWjBY/y6C6YiTJdICfWJn4OkdLQJQ9TMFWo0MT7KBf/5fLuC2DDDGWa3C/sqPJrGZVXGULEp2vWYgWjg0KCU+jU0P/5EBgLqUJ4EIdvN/a6klhmUlgncwgAZtRkoUzsH2RnHpWQ4RNyEeM6HiR1+0P9UYCHFQhUEm7ktkrHcpSjY+3U4eAycpUbAJrzJMt76zfi0kxxvFFigCYsz6rwucB9s= chrislee@192-168-1-106.tpgi.com.au


volumes:
  jenkins_https_home:

networks:
  jenkins-network:



